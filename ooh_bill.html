<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<title>Signatures Booking Invoice</title>
	<style type="text/css">
		body {
			/* background-image: url(SAPL-Bill-Sample.jpg);*/
			background-repeat: no-repeat;
			background-position: top center;
			margin-left: 0px;
			margin-top: 0px;
			margin-right: 0px;
			margin-bottom: 0px;
		}

		@media print {
			.noprint {
				display: none;
			}
		}
	</style>

	<script src="js/common-functions.js"></script>
	<script src="assets/plugins/jquery/jquery.min.js"></script>

</head>

<body>

	<!-- Page Loader -->
	<div class="page-loader-wrapper">
		<div class="loader">
			<div class="preloader">
				<div class="spinner-layer pl-red">
					<div class="circle-clipper left">
						<div class="circle"></div>
					</div>
					<div class="circle-clipper right">
						<div class="circle"></div>
					</div>
				</div>
			</div>

		</div>
	</div>

	<div class="container">
		<div class="row noprint">
			<div id="sign_stamp_div" style="display:none; padding:20px; text-decoration:bold; float: right;"><input
					type="checkbox" id="with_sign_stamp" name="with_sign_stamp" value="1" onclick="showHideStampSign()">
				<label for="with_sign_stamp"> Show Stamp and Signature </label>
			</div>
			<div class="col-sm-3">
				<div id="pdf_div"><button type="button" onclick="generate_pdf()"
						style="background-color: rgb(51, 122, 183); background-image: none;cursor: pointer;display: inline-block;font-size: 18px; padding:6px 25px; margin-top:15px; margin-left:15px; color:#fff; border:none; border-radius:5px; float: right;">Generate
						PDF</button></div>
			</div>
			<div class="col-sm-3">
				<div id="print_div"><button type="button" onclick="myFunction()"
						style="background-color: rgb(51, 122, 183); background-image: none;cursor: pointer;display: inline-block;font-size: 18px; padding:6px 25px; margin-top:15px; margin-left:15px; color:#fff; border:none; border-radius:5px; float: right;">Print</button>
				</div>
			</div>
			<div class="col-sm-3">
				<div id="back_div">
					<!-- <button type="button" onclick="backFunction()" style="background-color: #6B1D49; background-image: none;cursor: pointer;display: inline-block;font-size: 18px; padding:6px 25px; margin-top:15px; margin-left:15px; color:#fff; border:none; border-radius:5px; float: right;">Back</button> -->
					<a href="" id="backbtn" class="btn btn-sm btn-primary waves-effect"
						style="background-color: #6B1D49; background-image: none;cursor: pointer; font-size: 18px; padding:6px 25px; margin-top:15px; margin-left:15px; color:#fff; border:none; border-radius:5px; float: right;text-decoration: none; display:none;">Back</a>
				</div>
			</div>
			<div class="col-sm-3">
				<div id="edit_div">
					<a href="" id="editbtn" class="btn btn-sm btn-primary waves-effect"
						style="background-color: #6B1D49; background-image: none;cursor: pointer; font-size: 18px; padding:6px 25px; margin-top:15px; margin-left:15px; color:#fff; border:none; border-radius:5px; float: right;text-decoration: none;">Edit</a>
				</div>
			</div>
		</div>
		<div>

			<!-- End Page Loader -->
			<table width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
				<tr>
					<td height="10"></td>
				</tr>
				<tr>
					<td style="border:1px solid #000;" align="left" valign="top">
						<table width="100%" border="0" cellspacing="0" cellpadding="0">
							<tr>
								<td width="62%" align="left" valign="top"
									style="padding-left:15px;font-size:15px; font-family:Arial, sans-serif;">
									<table width="100%" border="0" cellspacing="0" cellpadding="0">
										<tr>
											<td width="74%" align="left" valign="top" style="padding:10px">
												<p style="margin:0; padding:0;"><img src="assets/images/logo.jpg"
														width="225" height="86" alt="" /></p>
												<p style="margin:0;">&nbsp;</p>
												<p style="margin:0;"><b>Regd. Office :</b> </p>
												<p style="margin:0;">174/1, Raja Ram Mohan Roy Road, </p>
												<p style="margin:0;">Kolkata - 700 008</p>
												<p style="margin:0;">&nbsp;</p>
												<p style="margin:0;"><b>Correspondence Address :</b> </p>
												<p style="margin:0;">783, D.H. Road, Kolkata - 700008. </p>
												<p style="margin:0;"><b>Ph :</b> (033) 2447 3472 / (+91) 933 102 1671
												</p>
												<p style="margin:0;">&nbsp;</p>
												<p style="margin:0;"><b>PAN No. :</b> AAXCS1759E / <b>GSTIN :</b>
													19AAXCS1759E1ZQ</p>
												<p style="margin:0;"><b>CIN NO. :</b> U74999WB2016 PTC 215681</p>
												<p style="margin:0;"><b>PLACE OF SUPPLY :</b> WEST BENGAL / <b>STATE
														CODE :</b> 19</p>
												<p style="margin:0;"><b>E-mail :</b> signature.advertising15@gmail.com
												</p>
												<p style="margin:0;"><b>MSME No. :</b> WB18F0027702</p>
											</td>
											<td width="26%" align="left" valign="top"
												style="padding-top:10px;font-size: 20px; font-family:Arial, sans-serif;">
												<strong><u><span id="inv_type"></span></u></strong>
											</td>
										</tr>
										<tr>
											<td colspan="2" align="left" valign="top"></td>
										</tr>
									</table>
								</td>
								<td width="38%" align="left" valign="top"
									style="padding-left:15px;font-size:15px; font-family:Arial, sans-serif;">
									<table>
										<tr>
											<td width="30%" height="108" align="left" valign="top" style="margin:0;">
												&nbsp;</td>
										</tr>
										<tr>
											<td width="30%" align="left" valign="top" style="margin:0;">
												<p style="margin:0;"><b>Invoice No :</b> <span id="invoice_no"></span>
												</p>
												<p style="margin-top:0;"><b>Date :</b> <span id="invoice_date"></span>
												</p>
												<p style="margin:0;"><b>Order No :</b> <span id="po_no"></span></p>
												<p style="margin-top:0;"><b>Email dated :</b> <span
														id="email_date"></span></p>
												<p style="margin-top:0;"><b>Campaign Name : </b><span
														id="campaign_name"></span></p>
											</td>
										</tr>
										<tr>
											<td width="30%" align="left" valign="top" style="margin:0;">
												<p style="margin:0;"><b>Buyer&rsquo;s Name : <span id="cust_name"
															style="color:#0585CF;"></span></b></p>
												<p style="margin:0;"><b>Address : </b><span id="cust_address"></span>
												</p>
												<p style="margin:0;"><b>GSTIN : </b><span id="cust_gstin"></span></p>
												<p style="margin:0;"><b>Customer's PAN No. : </b><span
														id="cust_pan"></span> &nbsp; <b>State Code : </b><span
														id="cust_state"></span></p>
											</td>
										</tr>
									</table>
								</td>
							</tr>

						</table>
					</td>
				</tr>

				<tr>
					<td align="left" valign="top" style="font-size:14px; font-family:Arial, sans-serif;">
						<table width="100%" border="0" cellpadding="0" cellspacing="0" id="invoice_info_table">
							<tr>
								<td width="5%" align="center" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;">SL No.</td>
								<td width="52%" align="center" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;">Description</td>
								<td width="9%" align="center" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;">SAC/HSN</td>
								<td width="8%" align="center" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;">Size</td>
								<td colspan="2" align="center" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;">
									<table width="100%" border="0" cellspacing="0" cellpadding="0">
										<tr>
											<td colspan="2" align="center" valign="middle"
												style="border-bottom:1px solid #000;">Period</td>
										</tr>
										<tr>
											<td align="center" valign="middle" width="53%">From</td>
											<td align="center" valign="middle" width="47%"
												style="border-left:1px solid #000;">To</td>
										</tr>
									</table>
								</td>
								<td width="4%" align="center" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;">Qty</td>
								<td width="7%" align="center" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;">Space
									<br />Charges Rate
								</td>
								<td width="6%" align="center" valign="middle"
									style="border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000;">
									Amount</td>

							</tr>
							<tr>
								<td align="center" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;padding:10px;"></td>
								<td align="left" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;padding:10px;">
									<b>To,
										Being the charges of space for Advertisement on
										<br />Billboards/Hoarding/Gantry/Double-Decker/Metro
										Pillar/Pole-kiosk/Signal/Signage/Mobile Van at</b>
								</td>
								<td align="center" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;"><b
										id="hsn_sac_no">9983</b></td>
								<td align="center" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;"></td>
								<td align="center" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;"></td>
								<td align="center" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;" id="invoice_from">
								</td>
								<td align="center" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;" id="invoice_to">
								</td>
								<td align="right" valign="middle"
									style="border-left:1px solid #000; border-bottom:1px solid #000;padding-right:10px;">
								</td>
								<td align="right" valign="middle"
									style="border-left:1px solid #000;border-right:1px solid #000; border-bottom:1px solid #000;padding-right:10px;">
								</td>
							</tr>


							<tbody id="invoice_info_body">
							</tbody>

							<tr>
								<!-- <td align="center" valign="top" style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td> -->
								<td colspan="8"
									style="border-left:1px solid #000; border-bottom:1px solid #000;padding:10px;text-align:right;">
									Gross Amount</td>
								<td align="right" id="gross_amt"
									style="border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000;padding-right:10px;">
									xxxx</td>
							</tr>
							<tr id="discout_per">
								<!-- <td align="center" valign="top" style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td> -->
								<td colspan="8"
									style="border-left:1px solid #000; border-bottom:1px solid #000;padding:10px;text-align:right;">
									Discount %</td>
								<td align="right" id="dis_per"
									style="border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000;padding-right:10px;">
									xxxx</td>
							</tr>
							<tr id="discout_amt">
								<!-- <td align="center" valign="top" style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td> -->
								<td colspan="8"
									style="border-left:1px solid #000; border-bottom:1px solid #000;padding:10px;text-align:right;">
									Discount Amount</td>
								<td align="right" id="dis_amt"
									style="border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000;padding-right:10px;">
									xxxx</td>
							</tr>
							<tr>
								<!-- <td align="center" valign="top" style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td> -->
								<td colspan="8"
									style="border-left:1px solid #000; border-bottom:1px solid #000;padding:10px;text-align:right;">
									Net Amount</td>
								<td align="right" id="amount"
									style="border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000;padding-right:10px;">
									xxxx</td>
							</tr>
							<tr id="cgst_row">
								<!-- <td align="center" valign="top" style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td> -->
								<td colspan="8"
									style="border-left:1px solid #000; border-bottom:1px solid #000;padding:10px;text-align:right;">
									Add: CGST @<span id="cgst_percent">9</span>% </td>
								<td align="right" id="cgst_amount"
									style="border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000;padding-right:10px;">
									xxxx</td>
							</tr>
							<tr id="sgst_row">
								<!-- <td align="center" valign="top" style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td> -->
								<td colspan="8"
									style="border-left:1px solid #000; border-bottom:1px solid #000;padding:10px;text-align:right;">
									Add: SGST @<span id="sgst_percent">9</span>%</td>
								<td align="right" id="sgst_amount"
									style="border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000;padding-right:10px;">
									xxxx</td>
							</tr>
							<tr id="igst_row">
								<!-- <td align="center" valign="top" style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td> -->
								<td colspan="8"
									style="border-left:1px solid #000; border-bottom:1px solid #000;padding:10px;text-align:right;">
									Add: IGST @<span id="igst_percent">18</span>%</td>
								<td align="right" id="igst_amount"
									style="border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000;padding-right:10px;">
									xxxx</td>
							</tr>
							<tr>
								<!-- <td align="center" valign="top" style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td> -->
								<td colspan="8"
									style="border-left:1px solid #000; border-bottom:1px solid #000;padding:10px;text-align:right;">
									Round Off :</td>
								<td align="right" id="round_off"
									style="border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000;padding-right:10px;">
									xxxxx</td>
							</tr>
							<tr>
								<!-- <td align="center" valign="top" style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td> -->
								<td colspan="8"
									style="border-left:1px solid #000; border-bottom:1px solid #000;padding:10px;text-align:right;">
									In Words :<span id="word"><span></td>
								<td align="right" id="final_amount"
									style="border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000;padding-right:10px;">
									xxxxx</td>
							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td align="left" valign="top" style="font-size:14px; font-family:Arial, sans-serif;">
						<table width="100%" border="0" cellspacing="0" cellpadding="0">
							<tr>
								<td
									style="padding-right:35px; border-left:1px solid #000; padding-left:10px; border-bottom:1px solid #000;">
									<p
										style="margin-top:0;margin-bottom:5px; text-align:left;text-decoration:underline; padding-left: 100px">
										Bank Account Details</p>
									<p style="margin:0;"><i>In favour of</i>: <b style="color:#0585CF;">SIGNATURES
											ADVERTISING PRIVATE LIMITED</b></p>
									<p style="margin:0;">Account No. : <span id="accno"></span> | IFSC Code No: <span
											id="ifsc"></span></p>
									<p style="margin:0;">Benificiary Bank Name : <span id="bank_nm"></span> Branch :
										<span id="branch_nm"></span>
									</p>
									<!-- <p style="margin:0;">Bank Address : <span id="branch_address"></span></p> -->
								</td>
								<td style="border-bottom:1px solid #000;" align="right" valign="top">
									<table border="0" cellspacing="0" cellpadding="0">
										<tr>
											<td align="right" width="160" height="160" valign="middle">
												<div id="stamp_container"></div>
											</td>
											<!-- <td align="right" width="160" height="160" valign="middle"> <div><img src="assets/images/stamp.png" alt=""/></div> </td> -->
											<!-- <td align="center" width="160" height="160" valign="middle" style="background-image: url('assets/images/ab-sign.png');"><p style="padding:15px">For</p></td>
	<td align="center" width="160" height="160" valign="middle" style="background-image: url('assets/images/bkg-sign.png');"><p style="padding:15px">For</p></td> -->
											<td id="sign_container" align="center" width="160" height="160"
												valign="middle" style="">
												<p style="padding:15px">For</p>
											</td>

											<td align="center" width="220" valign="top"
												style="border-right:1px solid #000; padding-top:10px; padding-bottom:10px;">
												<p style="margin:0;">E. &. O. E</p>
												<br>
												<p><img src="assets/images/logo.jpg" width="102" height="39" alt="" />
												</p>
												<p style="margin:0;">Authorised Signatory</p>
											</td>
										</tr>

									</table>
								</td>
							</tr>

							<tr>
								<td colspan="2"
									style="font-size:10px; padding-right:35px; border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000; padding-left:10px; padding-top:5px;">
									<p style="margin-top:0;margin-bottom:5px; text-align:left;">
										<b style="text-decoration:underline;">Terms & Conditions</b>:
										<span>(i) Bills are to be paid via Cheque / NEFT / RTGS / DD. </span>
										<span>(ii) The above bill has been raised in accordance with your Purchase
											Order/Contract. </span>
										<span>(iii) This bill/invoice is strictly payable within 40 days from the 1st
											date of display, if not interest will be charged @ 24% p.a. </span>
										<span>(iv) Interest will be charged @ 18% on applicable GST, if it is not paid
											within 30 days. So, if the bill/invoice amount will not be paid within the
											exact period then the outstanding cannot be negotiated in future on term of
											payment over GST. </span>
										<span>(v) Any complaints will not be entertained in respect of this
											bill/invoice, after 10 days of presentation. </span>
										<span>(vi) All disputes are subject to Kolkata Jurisdiction. </span>
									</p>
								</td>
								<!-- <td style="padding-right:35px; border-right:1px solid #000; border-bottom:1px solid #000;padding-left:10px;">&nbsp;</td> -->
							</tr>

						</table>
					</td>
				</tr>
				<tr>
					<td height="20"></td>
				</tr>
			</table>

			<script>

				var invoice_id = getParameterByName('invoice_id');
				// alert(invoice_id);	
				$(document).ready(function () {
					//getAppName();
					//isLogin();  
					if (!invoice_id) {
						alert("Invalid request.");
						redirect_to();
						return;
					}
					//$("#backbtn").attr('href','invoice_manage.html?id='+booking_id);
					generate_bill(invoice_id);
					getStampSign();
				});

				function myFunction() {
					window.print();
				}


				function generate_bill(invoice_id) {
					// alert ("gggggggg");
					var maxRow = 20;
					$.ajax({
						type: 'POST', // define the type of HTTP verb we want to use (POST for our form)
						url: "handler/ajax_final_bill.php",
						data: { invoice_id: invoice_id, action_type: 'ooh_bill' },	//final_bill
						dataType: 'json', // what type of data do we expect back from the server
						encode: true,
						async: false
					})
						// using the done promise callback
						.done(function (data) {
							console.log(data);

							var total_day_amount = 0;
							var total_month_amount = 0;

							var resultHTML = ''; var i = 0;
							var po_generated_flag = '';
							var mail_confirmation_flag = '';
							var rent_applicable_flag = '';
							var full_address = '';
							var aft_dis_amt = 0;
							if (data.status) {
								//full_address=data.booking_info.company_name+'<br>'+data.booking_info.address+'<br>'+data.booking_info.village_town+'-'+data.booking_info.pin_code;
								$("#backbtn").attr('href', 'invoice_manage.html?id=' + data.booking_info.booking_id);
								$("#editbtn").attr('href', 'ooh_bill_edit.html?invoice_id=' + invoice_id);
								$("#backbtn").show();
								$("#editbtn").show();
								if (data.booking_info.po_no) {
									$("#po_no").text(data.booking_info.po_no);
								}
								else {
									$("#po_no").text(data.booking_info.po_number);
								}
								if (data.booking_info.email_date && data.booking_info.email_date != '00/00/0000') {
									$("#email_date").text(data.booking_info.email_date);
								}
								else if (data.booking_info.mail_confirmation_date != '00/00/0000') {
									$("#email_date").text(data.booking_info.mail_confirmation_date);
								}
								$("#cust_name").text(data.booking_info.client_name);

								if (data.booking_info.inv_type == 'T') {

									$("#inv_type").text('Tax Invoice');
								}
								if (data.booking_info.inv_type == 'E') {

									$("#inv_type").text('Estimate');
								}

								$("#cust_address").text(data.booking_info.client_address);
								$("#gstin").text(data.booking_info.gstin);
								$("#cust_gstin").text(data.booking_info.cust_gstin);
								$("#cust_pan").text(data.booking_info.cust_pan);
								$("#cust_state").text(data.booking_info.cust_state_code);
								$("#gross_amt").text(data.booking_info.gross_amount);
								$("#amount").text(data.booking_info.net_amount);


								$("#accno").text(data.booking_info.account_no);
								$("#ifsc").text(data.booking_info.ifsc_no);
								$("#bank_nm").text(data.booking_info.bank_name);
								$("#branch_nm").text(data.booking_info.branch_name);
								$("#branch_address").html(data.booking_info.branch_address);
								$("#campaign_name").text(data.booking_info.brand_name);

								if (data.booking_info.discount_percent > 0) {
									$("#dis_per").text(data.booking_info.discount_percent);
									$("#discout_amt").hide();
								}
								else {
									$("#dis_amt").text(data.booking_info.discount_amount);
									$("#discout_per").hide();
								}

								if (data.booking_info.igst_percent > 0) {
									$("#igst_percent").text(data.booking_info.igst_percent);
									$("#igst_amount").text(data.booking_info.igst_amount);
									$("#cgst_row").hide();
									$("#sgst_row").hide();
								}
								else {
									$("#cgst_percent").text(data.booking_info.cgst_percent);
									$("#cgst_amount").text(data.booking_info.cgst_amount);
									$("#sgst_percent").text(data.booking_info.sgst_percent);
									$("#sgst_amount").text(data.booking_info.sgst_amount);
									$("#igst_row").hide();
								}
								$("#hsn_sac_no").text(data.booking_info.hsn_sac_no);
								//$("#invoice_from").text(data.booking_info.invoice_from);
								//$("#invoice_to").text(data.booking_info.invoice_to);
								$("#invoice_no").text(data.booking_info.invoice_no);
								$("title").text("Booking Invoice: " + data.booking_info.invoice_no);
								$("#invoice_date").text(data.booking_info.invoice_date);
								//$("#final_amount").text(data.booking_info.payable_amount);

								var grand_value = data.booking_info.payable_amount;

								var grand_value_round = Math.round(grand_value);
								var cal_round_off = ((grand_value_round - grand_value) * 1).toFixed(2);
								$("#final_amount").text(grand_value_round.toFixed(2));
								$("#round_off").text(cal_round_off);

								var word = convert_into_words_from_rupee(grand_value_round);
								$("#word").text(word);

								var is_extended = data.booking_info.is_extended;
								var tmp_booking_no = '';

								$.each(data.booking_detail, function (key, value) {
									i++;
									resultHTML += '<tr>';
									resultHTML += ' <td align="center" valign="middle" style="border-left:1px solid #000; border-bottom:1px solid #000;padding:10px;">' + i + '</td> ';
									resultHTML += ' <td align="left" valign="middle" style="border-left:1px solid #000; border-bottom:1px solid #000;padding:10px;">' + value.site_psudo_name + '</td>';
									resultHTML += ' <td align="center" valign="middle" style="border-left:1px solid #000; border-bottom:1px solid #000;"></td>';
									resultHTML += ' <td align="center" valign="middle" style="border-left:1px solid #000; border-bottom:1px solid #000;">' + value.width + '&apos; X ' + value.height + '&apos;</td>';
									resultHTML += ' <td width="9%" align="center" valign="middle" style="border-left:1px solid #000; border-bottom:1px solid #000;">' + value.invoice_from + '</td> ';
									resultHTML += ' <td width="8%" align="center" valign="middle" style="border-left:1px solid #000; border-bottom:1px solid #000;">' + value.invoice_to + '</td>';
									resultHTML += ' <td align="center" valign="middle" style="border-left:1px solid #000; border-bottom:1px solid #000;">' + value.quantity + '</td>';
									resultHTML += ' <td align="right" valign="middle" style="border-left:1px solid #000; border-bottom:1px solid #000;padding-left:10px;padding-right:10px;">' + parseFloat(value.rate / value.quantity).toFixed(2) + '</td>';
									resultHTML += '<td align="right" valign="middle" style="border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000;padding-left:10px; padding-right:10px;">' + value.final_rate + '</td>';
									resultHTML += '</tr>';
								});
								// if ((i % maxRow) > 0) {
								// 	var height = 30 * (maxRow - (i % maxRow));
								// 	//resultHTML += '<tr><td height="' + height + '" align="center" valign="top" style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td><td style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td><td style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td><td style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td><td style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td><td style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td><td style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td><td align="right" style="border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td></tr>';
								// 	resultHTML += '<tr><td colspan="9" height="' + height + '" align="right" style="border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td></tr>';
								// }
								/*for(var j = i; j < maxRow; j++){
									resultHTML += '<tr><td height="30" align="center" valign="top" style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td><td style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td><td style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td><td style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td><td style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td><td style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td><td style="border-left:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td><td align="right" style="border-left:1px solid #000; border-right:1px solid #000; border-bottom:1px solid #000;">&nbsp;</td></tr>';
								}*/
							}
							else {
								resultHTML = '<td colspan="9">No Booking Available</td>';
							}

							$('#invoice_info_body').html(resultHTML);
						})
						// using the fail promise callback
						.fail(function (data) {
							// show any errors
							// best to remove for production
							console.log(data);
						});

				}

				var stamp = '';
				var sign = '';
				function getStampSign() {
					$.ajax({
						type: 'POST', // define the type of HTTP verb we want to use (POST for our form)
						url: "handler/ajax_final_bill.php",
						data: { invoice_id: invoice_id, action_type: 'GET_STAMP_SIGNATURE' },	//final_bill
						dataType: 'json', // what type of data do we expect back from the server
						encode: true,
						async: false
					})
						// using the done promise callback
						.done(function (data) {
							console.log(data);
							if (data.sign != '') {
								$("#sign_stamp_div").show();
								sign = data.sign;
							}
							if (data.stamp != '') {
								stamp = data.stamp;
							}
						})
						// using the fail promise callback
						.fail(function (data) {
							// show any errors
							// best to remove for production
							console.log(data);
						});

				}

				function showHideStampSign() {
					if ($("#with_sign_stamp").prop("checked") == true) {
						//alert('Y');
						if (sign != '') {
							$('#sign_container').css('background-image', 'url(upload_file/' + sign + ')');
						}
						if (stamp != '') {
							$('#stamp_container').html('<img src="upload_file/' + stamp + '">');
						}
					}
					else {
						//alert('N');
						$('#sign_container').css('background-image', '');
						$('#stamp_container').html("");
					}
				}

				function generate_pdf() {
					//alert(1);
					var with_sign_stamp = 0;
					if ($("#with_sign_stamp").prop("checked") == true) {
						with_sign_stamp = 1;
					}
					$.ajax({
						type: 'POST', // define the type of HTTP verb we want to use (POST for our form)
						url: "handler/invoice_pdf.php",
						//url:  "handler/invoice_pdf_backup_30-6-2020.php",
						//url:  "handler/test_pdf.php",
						data: { action_type: 'DOWNLOAD_PDF', invoice_id: invoice_id, with_sign_stamp: with_sign_stamp },
						dataType: 'json', // what type of data do we expect back from the server
						encode: true
					})
						.done(function (data) {
							if (data.status) {
								console.log(data);
								// window.location.href = "../pdf/" + data.file_name;
								/*$("#download_pdf_modal").modal('toggle');
								$("#pdf_download_btn").prop('disabled',false);$("#pdf_download_btn").html('SUBMIT');*/
								var $a = $("<a>");
								//$a.attr("href",data.file);
								// $a.attr("href", URL + 'tmp/' + data.file_name);
								$a.attr("href", URL + 'pdf/' + data.file_name);
								$a.attr("target", "_blank");
								$a.text("Download PDF");
								//$("#list_buttons_div").append($a);
								$a.attr("download", data.file_name);
								$a[0].click();
								$a.remove();
							}
						})
						// using the fail promise callback
						.fail(function (data) {
							// show any errors
							// best to remove for production
							console.log(data);
							//$("#pdf_download_btn").prop('disabled',false);
						});

				}
			</script>
</body>

</html>